# upload_images.py

> Following is the documentation of upload_images.py file

The code imports necessary libraries and sets some constant values. The purpose of this code is to upload an image to an AWS S3 bucket using Python and the Boto3 library.

## Libraries
- `boto3`: It is a library for interacting with AWS services through Python code, and is used by developers to build and deploy applications that run on AWS.
- `PIL`: The `Image` sub-module from this library allows you to create, open, manipulate and save image files. 
- `os`: helps to interact with the operating system. It especially allows to access and manipulate environment variables. 

## Constants

- `AWS_ACCESS_KEY`:  the AWS access key from the env file.
- `AWS_SECRET_KEY`: the AWS secret key from the env file.
- `BUCKET_NAME`: sets the name of the S3 bucket to be used.
- `CURRENT_BRAND`: sets the name of the brand for which the image is being uploaded.
- `COMPRESS_IMG_SIZE`: sets the maximum size of the compressed image in bytes (300000 ~ 300kB).
- `IMAGES_DIR`: sets the path of the directory where the image to be uploaded is located.

## Functions

Following are the list of the main functions used in the file:

### upload_to_aws(local_file, bucket, s3_file)

The upload_to_aws function takes three arguments: the local file to be uploaded, the S3 bucket name, and the S3 file name. It uploads the local file to the specified S3 bucket using the Boto3 library. 

- If the upload is successful, it returns True. 
- If the file is not found or the credentials are invalid, it returns False.

### compressImg(file)

This function takes a file as input and returns the file path of the compressed image. The full file path is generated by joining the IMAGES_DIR and the file name.

- The image file is then opened using the `Image.open()` function from the Pillow library.
- The image is resized to a maximum width of 1080 pixels while maintaining the aspect ratio.
- The optimize parameter is set to True, which enables the image to be optimized for a smaller file size.
```python
picture.save(filepath, optimize=True, quality=30)
```
- The quality parameter is set to 30, which is a low quality setting that results in a smaller file size.
- The compressed image is then saved to the same file path as the original image.







